# Copyright 2009-2017 Wulf C. Krueger <philantrop@exherbo.org>
# Distributed under the terms of the GNU General Public License v2

MY_PV=${PV/_p/+nmu}
MY_PNV=${PN}_${MY_PV}

require autotools [ supported_autoconf=[ 2.5 ] supported_automake=[ 1.16 ] ]

SUMMARY="Library for handling paper characteristics"
HOMEPAGE="https://packages.debian.org/unstable/source/libpaper"
DOWNLOADS="mirror://debian/pool/main/libp/libpaper/${MY_PNV}.tar.gz"

UPSTREAM_CHANGELOG="https://metadata.ftp-master.debian.org/changelogs/main/libp/${PN}/${MY_PNV}_changelog"

LICENCES="GPL-2"
SLOT="0"
PLATFORMS="~amd64 ~armv8 ~x86"
MYOPTIONS=""

DEPENDENCIES=""

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --disable-static
)

WORK=${WORKBASE}/${PN}-${MY_PV}

src_install() {
    default

    dodir /etc
    (paperconf 2>/dev/null || echo a4) > "${IMAGE}"/etc/papersize
}

