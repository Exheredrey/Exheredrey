# Copyright 2010 Alex Elsayed <eternaleye@gmail.com>
# Copyright 2018 Thomas Berger <loki@lokis-choaos.de>
# Distributed under the terms of the GNU General Public License v2

require github [ user=jtv tag=${PV} ]
SUMMARY="Official C++ client API for PostgreSQL"
DESCRIPTION="
If you are writing software in C++ that needs to access databases managed by
postgres—on just about any platform—then libpqxx is the library you use.
"
HOMEPAGE="http://pqxx.org"

# Requires connection to a running postgres server
RESTRICT="test"

LICENCES="BSD-3"
SLOT="0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS="doc"

DEPENDENCIES="
    build:
        virtual/pkg-config
    build+run:
        dev-libs/boost
        dev-db/postgresql-client[>=8.0]
"

DEFAULT_SRC_CONFIGURE_PARAMS=(
    --enable-shared
    --disable-documentation
    --disable-static
)

src_install() {
    default

    if option doc; then
        insinto /usr/share/doc/${PNVR}/html
        doins -r doc/html/*
    fi
}

