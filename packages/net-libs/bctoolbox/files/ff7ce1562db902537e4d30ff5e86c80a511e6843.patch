From ff7ce1562db902537e4d30ff5e86c80a511e6843 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Fran=C3=A7ois=20Grisez?=
 <francois.grisez@belledonne-communications.com>
Date: Tue, 29 Aug 2017 11:16:55 +0200
Subject: [PATCH] Fix deprecated header warning while using MbedTLS v2.4.0 and
 later

---
 src/crypto/mbedtls.c | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/crypto/mbedtls.c b/src/crypto/mbedtls.c
index 08cace5..c3a5afa 100644
--- a/src/crypto/mbedtls.c
+++ b/src/crypto/mbedtls.c
@@ -27,7 +27,6 @@ Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 #include <mbedtls/ssl.h>
 #include <mbedtls/timing.h>
 #include <mbedtls/error.h>
-#include <mbedtls/net.h>
 #include <mbedtls/base64.h>
 
 #include <mbedtls/pem.h>
@@ -40,6 +39,12 @@ Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 #include <mbedtls/sha512.h>
 #include <mbedtls/gcm.h>
 
+#if MBEDTLS_VERSION_NUMBER > 0x02040000 // v2.4.0
+#include <mbedtls/net_sockets.h>
+#else
+#include <mbedtls/net.h>
+#endif
+
 #include <bctoolbox/crypto.h>
 #include "bctoolbox/logging.h"
 
